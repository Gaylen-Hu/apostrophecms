{% extends "layout.html" %}

{% block main %}
<main class="flex-grow">
  {# 面包屑和返回按钮 #}
  <section class="py-6 bg-gray-50 border-b border-gray-200">
    <div class="container mx-auto px-4 md:px-6">
      <div class="flex items-center justify-between">
        <nav class="text-sm text-gray-600">
          <a href="/" class="hover:text-blue-600 transition-colors">首页</a>
          <span class="mx-2">/</span>
          <a href="{{ data.page._url }}" class="hover:text-blue-600 transition-colors">案例中心</a>
          <span class="mx-2">/</span>
          <span class="text-gray-900 font-medium">{{ data.piece.mainTitle }}</span>
        </nav>
        <a href="{{ data.page._url }}" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-medium">
          <i class="fa-solid fa-arrow-left mr-2"></i>返回列表
        </a>
      </div>
    </div>
  </section>

  {# 案例内容 #}
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 md:px-6">
      <article class="max-w-5xl mx-auto">
        {# 案例头部 #}
        <header class="mb-12">
          {# 标签和分类 #}
          <div class="flex flex-wrap items-center gap-3 mb-6">
            <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold">
              {% if data.piece.category === 'transport' %}运输案例
              {% elif data.piece.category === 'warehouse' %}仓储案例
              {% elif data.piece.category === 'supply-chain' %}供应链案例
              {% elif data.piece.category === 'cross-border' %}跨境物流
              {% else %}其他
              {% endif %}
            </span>
            {% if data.piece.articleTag %}
              <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold">
                <i class="fa-solid fa-tag mr-1"></i>{{ data.piece.articleTag }}
              </span>
            {% endif %}
            {% if data.piece.isFeatured %}
              <span class="bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full text-sm font-semibold">
                <i class="fa-solid fa-star mr-1"></i>推荐案例
              </span>
            {% endif %}
          </div>

          {# 主标题 #}
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight">
            {{ data.piece.mainTitle }}
          </h1>
          
          {# 副标题 #}
          {% if data.piece.subTitle %}
            <p class="text-xl md:text-2xl text-gray-600 mb-8">
              {{ data.piece.subTitle }}
            </p>
          {% endif %}
          
          {# 元信息卡片 #}
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 py-6 border-y border-gray-200">
            <div class="flex items-center">
              <div class="flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
                <i class="fa-solid fa-building text-blue-600 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-gray-500">来源</p>
                <p class="font-semibold text-gray-900">{{ data.piece.source }}</p>
              </div>
            </div>
            <div class="flex items-center">
              <div class="flex-shrink-0 w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4">
                <i class="fa-solid fa-calendar text-green-600 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-gray-500">发布时间</p>
                <p class="font-semibold text-gray-900">{{ data.piece.publishDate | date('YYYY年MM月DD日') }}</p>
              </div>
            </div>
            <div class="flex items-center">
              <div class="flex-shrink-0 w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4">
                <i class="fa-solid fa-hashtag text-purple-600 text-xl"></i>
              </div>
              <div>
                <p class="text-sm text-gray-500">案例编号</p>
                <p class="font-semibold text-gray-900">{{ data.piece.titleDomain }}</p>
              </div>
            </div>
          </div>
          
          {# 案例简介 #}
          {% if data.piece.description %}
            <div class="mt-8 bg-gradient-to-r from-blue-50 to-blue-100 p-8 rounded-2xl border-l-4 border-blue-600">
              <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center">
                <i class="fa-solid fa-lightbulb text-blue-600 mr-2"></i>案例概述
              </h3>
              <p class="text-lg text-gray-800 leading-relaxed">
                {{ data.piece.description }}
              </p>
            </div>
          {% endif %}
        </header>
        
        {# 展示图 #}
        {% if data.piece.featuredImage %}
          <div class="mb-12 rounded-2xl overflow-hidden shadow-2xl">
            {% area data.piece, 'featuredImage' %}
          </div>
        {% endif %}
        
        {# 案例详细内容 #}
        <div class="prose prose-lg prose-blue max-w-none mb-12">
          {% area data.piece, 'content' %}
        </div>
        
        {# 案例底部信息卡片 #}
        <footer class="mt-16 pt-8 border-t-2 border-gray-200">
          <div class="bg-gray-50 p-8 rounded-2xl">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
              <div>
                <h4 class="font-bold text-gray-900 mb-4 text-lg">案例信息</h4>
                <dl class="space-y-3">
                  <div class="flex">
                    <dt class="text-gray-600 w-24">来源：</dt>
                    <dd class="font-medium text-gray-900">{{ data.piece.source }}</dd>
                  </div>
                  <div class="flex">
                    <dt class="text-gray-600 w-24">发布日期：</dt>
                    <dd class="font-medium text-gray-900">{{ data.piece.publishDate | date('YYYY年MM月DD日') }}</dd>
                  </div>
                  {% if data.piece.validFrom or data.piece.validTo %}
                    <div class="flex">
                      <dt class="text-gray-600 w-24">有效期：</dt>
                      <dd class="font-medium text-gray-900">
                        {% if data.piece.validFrom %}{{ data.piece.validFrom | date('YYYY-MM-DD') }}{% endif %}
                        {% if data.piece.validFrom and data.piece.validTo %} 至 {% endif %}
                        {% if data.piece.validTo %}{{ data.piece.validTo | date('YYYY-MM-DD') }}{% else %}永久有效{% endif %}
                      </dd>
                    </div>
                  {% endif %}
                </dl>
              </div>
              
              <div>
                <h4 class="font-bold text-gray-900 mb-4 text-lg">展示渠道</h4>
                <div class="flex flex-wrap gap-2">
                  {% for ch in data.piece.channel %}
                    {% if ch === 'website' %}
                      <span class="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                        <i class="fa-solid fa-globe mr-1"></i>官网
                      </span>
                    {% elif ch === 'mobile' %}
                      <span class="inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">
                        <i class="fa-solid fa-mobile mr-1"></i>移动端
                      </span>
                    {% elif ch === 'wechat' %}
                      <span class="inline-flex items-center px-3 py-1 bg-emerald-100 text-emerald-800 rounded-full text-sm">
                        <i class="fa-brands fa-weixin mr-1"></i>微信
                      </span>
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            </div>
            
            {# 操作按钮 #}
            <div class="flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200">
              <a href="{{ data.page._url }}" 
                 class="flex-1 inline-flex items-center justify-center px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors">
                <i class="fa-solid fa-arrow-left mr-2"></i>返回案例列表
              </a>
              <button onclick="window.print()" 
                      class="flex-1 inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors">
                <i class="fa-solid fa-print mr-2"></i>打印案例
              </button>
              <button onclick="shareCase()" 
                      class="flex-1 inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors">
                <i class="fa-solid fa-share-nodes mr-2"></i>分享案例
              </button>
            </div>
          </div>
        </footer>
      </article>
    </div>
  </section>

  {# CTA区域 #}
  <section class="py-20 bg-gradient-to-r from-blue-600 to-blue-800 text-white">
    <div class="container mx-auto px-4 md:px-6 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">对我们的服务感兴趣？</h2>
      <p class="text-xl text-blue-100 mb-8 max-w-2xl mx-auto">联系我们，获取定制化物流解决方案</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-colors shadow-lg">
          <i class="fa-solid fa-phone mr-2"></i>立即联系
        </a>
        <a href="/cases" class="inline-flex items-center justify-center px-8 py-4 bg-transparent border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-blue-600 transition-colors">
          <i class="fa-solid fa-briefcase mr-2"></i>更多案例
        </a>
      </div>
    </div>
  </section>
</main>

<script>
  function shareCase() {
    if (navigator.share) {
      navigator.share({
        title: '{{ data.piece.mainTitle }}',
        text: '{{ data.piece.description }}',
        url: window.location.href
      }).catch(console.error);
    } else {
      // 降级方案：复制链接
      navigator.clipboard.writeText(window.location.href).then(() => {
        alert('案例链接已复制到剪贴板！');
      });
    }
  }
</script>
{% endblock %}

